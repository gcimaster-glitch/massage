# ğŸ¥ Soothe x CARE CUBE Japan

> **ã€Œç™’ã‚„ã—ã‚’ã€éƒ½å¸‚ã®ã‚¤ãƒ³ãƒ•ãƒ©ã¸ã€‚ã€**  
> æ—¥æœ¬ç‰ˆSoothe Ã— CARE CUBEã®çµ±åˆã‚¦ã‚§ãƒ«ãƒã‚¹ãƒ»ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 

**ğŸŒ é–‹ç™ºã‚µãƒ¼ãƒãƒ¼**: https://3000-i5p7tkvsvj3ulos6jliw6-d0b9e1e2.sandbox.novita.ai  
**ğŸ“¦ GitHub**: https://github.com/gcimaster-glitch/massage

---

## ğŸ“Š ç¾åœ¨ã®é–‹ç™ºçŠ¶æ³

### âœ… Phase A: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰UIæ”¹å–„ ï¼ˆ**å®Œäº†**ï¼‰
- [x] Reactã‚¢ãƒ—ãƒªã®ãƒ“ãƒ«ãƒ‰ç’°å¢ƒæ§‹ç¯‰
- [x] ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒã®å‹•ä½œç¢ºèª
- [x] Wrangler Pages Dev ã‚µãƒ¼ãƒãƒ¼èµ·å‹•æˆåŠŸ
- [x] **äº‹æ¥­æˆ¦ç•¥ãƒšãƒ¼ã‚¸ (/strategy) ã®å¼·åŒ–å®Œäº†ï¼**
  - Hero ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã€Œç™’ã‚„ã—ã‚’ã€éƒ½å¸‚ã®ã‚¤ãƒ³ãƒ•ãƒ©ã¸ã€‚ã€
  - CARE CUBE (IaaS) ã‚»ã‚¯ã‚·ãƒ§ãƒ³
  - Safety Tech (AI Sentinel) ã‚»ã‚¯ã‚·ãƒ§ãƒ³
  - Revenue Split ã‚»ã‚¯ã‚·ãƒ§ãƒ³ + æ¯”è¼ƒè¡¨
  - Multi-Agency ã‚»ã‚¯ã‚·ãƒ§ãƒ³
- [x] ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³æœ€é©åŒ–

### âœ… Phase B: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIçµ±åˆ ï¼ˆ**å®Œäº†**ï¼‰
- [x] **Honoãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å®Œå…¨çµ±åˆå®Œäº†ï¼**
- [x] **å…¨APIå®Ÿè£…å®Œäº†** (èªè¨¼ã€äºˆç´„ã€æ±ºæ¸ˆã€é€šçŸ¥ã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã€ã‚»ãƒ©ãƒ”ã‚¹ãƒˆç®¡ç†)
- [x] **ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å®Ÿè£…** - D1ãªã—ã§ã‚‚é–‹ç™ºå¯èƒ½
- [x] D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šæº–å‚™å®Œäº†
- [x] Stripeæ±ºæ¸ˆAPIçµ±åˆæº–å‚™å®Œäº†
- [x] Resendãƒ¡ãƒ¼ãƒ«é€ä¿¡çµ±åˆæº–å‚™å®Œäº†

### âœ… Phase C: Cloudflareãƒ‡ãƒ—ãƒ­ã‚¤ ï¼ˆ**å®Œäº†ğŸ‰**ï¼‰
- [x] **Cloudflareãƒªã‚½ãƒ¼ã‚¹ä½œæˆå®Œäº†**
  - D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: `soothe-db-production` âœ…
  - R2ãƒã‚±ãƒƒãƒˆ: `soothe-storage` âœ…
- [x] **æœ¬ç•ªãƒ‡ãƒ—ãƒ­ã‚¤æˆåŠŸï¼**
  - ğŸŒ æœ¬ç•ªURL: https://soothe-care-cube-jp.pages.dev
  - ğŸ”§ APIå‹•ä½œç¢ºèªæ¸ˆã¿
  - ğŸ“Š D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Œäº†
  - ğŸ“¦ ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æŠ•å…¥å®Œäº†

---

## ğŸš€ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

**Soothe x CARE CUBE Japan**ã¯ã€ã‚»ãƒ©ãƒ”ã‚¹ãƒˆã¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚’å®‰å…¨ã«ã¤ãªãæ¬¡ä¸–ä»£ã‚¦ã‚§ãƒ«ãƒã‚¹ãƒ»ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚

### ä¸»ãªç‰¹å¾´

1. **ğŸ¢ CARE CUBE (IaaS)**: å»ºç¯‰ç‰©ã§ã¯ãªãã€Œå®¶å…·ã€ã¨ã—ã¦è¨­ç½®ã—ã€æ¶ˆé˜²æ³•ã‚’å›é¿ã—ã¦éƒ½å¿ƒéƒ¨ã«é«˜é€Ÿå±•é–‹
2. **ğŸ›¡ï¸ AI Sentinel**: Gemini Live APIã«ã‚ˆã‚‹éŸ³å£°ç›£è¦–ã§ã€Œå¯†å®¤ãƒªã‚¹ã‚¯ã€ã‚’è§£æ¶ˆ
3. **ğŸ’° Tri-Win ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ **: ã‚»ãƒ©ãƒ”ã‚¹ãƒˆãƒ»ãƒ›ã‚¹ãƒˆãƒ»ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®ä¸‰è€…å…±æ „ãƒ¢ãƒ‡ãƒ«

---

## ğŸ›  æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- React 19 + Vite
- TailwindCSS
- React Router v7
- Lucide React

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
- Hono (Cloudflare Workersæœ€é©åŒ–)
- Cloudflare Pages (ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°)
- Cloudflare D1 (SQLiteãƒ™ãƒ¼ã‚¹ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«åˆ†æ•£DB)
- Cloudflare R2 (ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸)

### å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹
- **Stripe**: æ±ºæ¸ˆå‡¦ç† + Stripe Connect KYC
- **Resend**: ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ãƒ¡ãƒ¼ãƒ«
- **Google Gemini 2.5/3**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ AIç›£è¦–ã€ç”»åƒè§£æ

---

## ğŸ“‹ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### 1. ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
```bash
git clone https://github.com/gcimaster-glitch/massage.git
cd massage
```

### 2. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
npm install
```

### 3. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š
`.env.local` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ:
```bash
VITE_GEMINI_API_KEY=your_gemini_api_key_here
```

### 4. D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
```bash
# ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é©ç”¨
npm run db:migrate:local

# ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’æŠ•å…¥
npm run db:seed
```

### 5. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•
```bash
# ãƒ“ãƒ«ãƒ‰
npm run build

# PM2ã§é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼ˆæ¨å¥¨ï¼‰
pm2 start ecosystem.config.cjs

# ã¾ãŸã¯Wranglerç›´æ¥èµ·å‹•
npm run dev

# D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½¿ã†å ´åˆ
npm run dev:d1
```

### 6. ãƒ–ãƒ©ã‚¦ã‚¶ã§ç¢ºèª
```
http://localhost:3000
http://localhost:3000/#/strategy  # äº‹æ¥­æˆ¦ç•¥ãƒšãƒ¼ã‚¸
http://localhost:3000/api/health  # API Health Check
```

---

## â˜ï¸ Cloudflareãƒ‡ãƒ—ãƒ­ã‚¤

### äº‹å‰æº–å‚™

1. **Cloudflareã«ãƒ­ã‚°ã‚¤ãƒ³**
   ```bash
   npx wrangler login
   ```

2. **D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ä½œæˆ**
   ```bash
   npx wrangler d1 create soothe-db-production
   # å‡ºåŠ›ã•ã‚ŒãŸ database_id ã‚’ wrangler.jsonc ã«ã‚³ãƒ”ãƒ¼
   ```

3. **R2ãƒã‚±ãƒƒãƒˆã‚’ä½œæˆ**
   ```bash
   npx wrangler r2 bucket create soothe-storage
   ```

4. **ç’°å¢ƒå¤‰æ•°ï¼ˆSecretsï¼‰ã‚’è¨­å®š**
   ```bash
   npx wrangler secret put STRIPE_SECRET
   npx wrangler secret put RESEND_API_KEY
   npx wrangler secret put GEMINI_API_KEY
   ```

### ãƒ‡ãƒ—ãƒ­ã‚¤å®Ÿè¡Œ

```bash
# åˆå›ãƒ‡ãƒ—ãƒ­ã‚¤
npm run build
npx wrangler pages project create soothe-care-cube-jp \
  --production-branch main \
  --compatibility-date 2024-01-01

# ãƒ‡ãƒ—ãƒ­ã‚¤
npm run deploy

# æœ¬ç•ªãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
npm run db:migrate:prod
```

---

## ğŸ“‚ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
webapp/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ index.tsx          # Hono BFF (Backend for Frontend) - å…¨APIå®Ÿè£…æ¸ˆã¿
â”œâ”€â”€ functions/
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ [[route]].ts   # Cloudflare Pages Functions ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”œâ”€â”€ pages/                 # ãƒ­ãƒ¼ãƒ«åˆ¥ãƒšãƒ¼ã‚¸æ§‹æˆ
â”‚   â”œâ”€â”€ user/              # ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ãƒšãƒ¼ã‚¸
â”‚   â”œâ”€â”€ therapist/         # ã‚»ãƒ©ãƒ”ã‚¹ãƒˆå‘ã‘ãƒšãƒ¼ã‚¸
â”‚   â”œâ”€â”€ host/              # ãƒ›ã‚¹ãƒˆå‘ã‘ãƒšãƒ¼ã‚¸
â”‚   â”œâ”€â”€ office/            # äº‹å‹™æ‰€å‘ã‘ãƒšãƒ¼ã‚¸
â”‚   â”œâ”€â”€ admin/             # ç®¡ç†è€…å‘ã‘ãƒšãƒ¼ã‚¸
â”‚   â””â”€â”€ portal/            # å…¬é–‹ãƒãƒ¼ã‚¿ãƒ«
â”‚       â””â”€â”€ BusinessStrategy.tsx  # äº‹æ¥­æˆ¦ç•¥ãƒšãƒ¼ã‚¸ï¼ˆPhase Aå®Œæˆï¼‰
â”œâ”€â”€ components/            # å†åˆ©ç”¨å¯èƒ½ãªUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”œâ”€â”€ services/              # APIé€šä¿¡ã€ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ç®¡ç†
â”‚   â”œâ”€â”€ api.ts             # Unified API Clientï¼ˆPhase Bå®Œæˆï¼‰
â”‚   â”œâ”€â”€ aiService.ts       # Gemini APIçµ±åˆ
â”‚   â””â”€â”€ stripe.ts          # Stripeçµ±åˆ
â”œâ”€â”€ migrations/            # D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â””â”€â”€ 0001_initial_schema.sql
â”œâ”€â”€ schema.sql             # D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ
â”œâ”€â”€ seed.sql               # é–‹ç™ºç”¨ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿
â”œâ”€â”€ constants.ts           # ã‚µãƒ¼ãƒ“ã‚¹åãƒ»å®šæ•°ç®¡ç†
â”œâ”€â”€ wrangler.jsonc         # Cloudflareè¨­å®š
â”œâ”€â”€ ecosystem.config.cjs   # PM2è¨­å®šï¼ˆé–‹ç™ºç’°å¢ƒï¼‰
â”œâ”€â”€ HANDOVER.md            # è©³ç´°ãªå¼•ç¶™æ›¸
â”œâ”€â”€ BACKEND_INTEGRATION_PLAN.md  # Phase B è¨­è¨ˆæ›¸
â””â”€â”€ GENSPARK_DEVELOPER_INSTRUCTIONS.md  # Phase A æŒ‡ç¤ºæ›¸
```

---

## ğŸŒ ä¸»è¦URL

### ğŸš€ æœ¬ç•ªç’°å¢ƒï¼ˆå…¬é–‹ä¸­ï¼ï¼‰
- **ğŸŒ æœ¬ç•ªã‚µã‚¤ãƒˆ**: https://soothe-care-cube-jp.pages.dev
- **ğŸ“ Strategy ãƒšãƒ¼ã‚¸**: https://soothe-care-cube-jp.pages.dev/#/strategy
- **ğŸ”§ API Health Check**: https://soothe-care-cube-jp.pages.dev/api/health
- **ğŸ‘¥ ã‚»ãƒ©ãƒ”ã‚¹ãƒˆAPI**: https://soothe-care-cube-jp.pages.dev/api/therapists

### ğŸ› ï¸ é–‹ç™ºç’°å¢ƒ
- **ğŸš€ é–‹ç™ºã‚µãƒ¼ãƒãƒ¼**: https://3000-i5p7tkvsvj3ulos6jliw6-d0b9e1e2.sandbox.novita.ai
- **ğŸ“ Strategy ãƒšãƒ¼ã‚¸**: https://3000-i5p7tkvsvj3ulos6jliw6-d0b9e1e2.sandbox.novita.ai/#/strategy
- **ğŸ”§ API Health Check**: https://3000-i5p7tkvsvj3ulos6jliw6-d0b9e1e2.sandbox.novita.ai/api/health

### ğŸ“š ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ»ãƒªã‚½ãƒ¼ã‚¹
- **ğŸ’¾ GitHub Repository**: https://github.com/gcimaster-glitch/massage
- **ğŸ“¦ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—**: https://www.genspark.ai/api/files/s/ay9HK9Eq
- **ğŸ“š HANDOVER.md**: [å¼•ç¶™æ›¸](./HANDOVER.md)
- **ğŸ“š Phase A æŒ‡ç¤ºæ›¸**: [GENSPARK_DEVELOPER_INSTRUCTIONS.md](./GENSPARK_DEVELOPER_INSTRUCTIONS.md)
- **ğŸ“š Phase B è¨­è¨ˆæ›¸**: [BACKEND_INTEGRATION_PLAN.md](./BACKEND_INTEGRATION_PLAN.md)

---

## ğŸ·ï¸ ã‚µãƒ¼ãƒ“ã‚¹åå¤‰æ›´

å°†æ¥ã‚µãƒ¼ãƒ“ã‚¹åã‚’å¤‰æ›´ã™ã‚‹å ´åˆã¯ã€ä»¥ä¸‹ã®3ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿æ›´æ–°:

1. `constants.ts` ã® `BRAND` ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
2. `wrangler.jsonc` ã® `name` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
3. `package.json` ã® `name` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰

è©³ç´°ã¯ [HANDOVER.md](./HANDOVER.md#ã‚µãƒ¼ãƒ“ã‚¹åå¤‰æ›´æ‰‹é †) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

---

## ğŸ—„ï¸ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ç®¡ç†

### ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º
```bash
# ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³é©ç”¨
npm run db:migrate:local

# ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æŠ•å…¥
npm run db:seed

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒªã‚»ãƒƒãƒˆ
npm run db:reset

# ã‚³ãƒ³ã‚½ãƒ¼ãƒ«æ¥ç¶š
npm run db:console:local
```

### æœ¬ç•ªç’°å¢ƒ
```bash
# ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³é©ç”¨
npm run db:migrate:prod

# ã‚³ãƒ³ã‚½ãƒ¼ãƒ«æ¥ç¶š
npm run db:console:prod
```

---

## ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

- **ç’°å¢ƒå¤‰æ•°**: `.env.local` ã¯çµ¶å¯¾ã«ã‚³ãƒŸãƒƒãƒˆã—ãªã„ï¼ˆ`.gitignore`ã«è¨˜è¼‰æ¸ˆã¿ï¼‰
- **Secretsç®¡ç†**: æœ¬ç•ªç’°å¢ƒã¯ `wrangler secret put` ã§ç®¡ç†
- **KYC**: Stripe Identityã§æœ¬äººç¢ºèª
- **AIç›£è¦–**: Gemini Live APIã§éŸ³å£°è§£æã€å¯†å®¤ãƒªã‚¹ã‚¯ã‚’è§£æ¶ˆ

---

## ğŸ“§ ãŠå•ã„åˆã‚ã›

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç®¡ç†è€…**: ã¦ã¤ã˜ã•ã‚“  
**GitHub**: https://github.com/gcimaster-glitch

---

## ğŸ“ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

Â© 2025 Soothe x CARE CUBE Japan. All Rights Reserved.

---

## ğŸ“š ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

è©³ç´°ãªé–‹ç™ºã‚¬ã‚¤ãƒ‰ã¯ [HANDOVER.md](./HANDOVER.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚